---
description: Convenciones para interfaces de servicios (Contracts) en Laravel
globs: app/Http/Contracts/**/*.php
alwaysApply: false
---

# Contracts (Interfaces)

## Ubicación
`app/Contracts/{Entity}/` (ej: `app/Contracts/User/`)

## Responsabilidades

- Definir contratos (interfaces) para servicios
- Establecer la estructura de métodos que deben implementar los servicios
- Permitir desacoplamiento entre capas
- Facilitar testing y mocking

## Convenciones

- Cada entidad tiene su propia carpeta en singular (ej: `User`, `Order`, `Product`)
- Nombre de la interfaz: PascalCase singular con sufijo `ServiceInterface` (ej: `UserServiceInterface`, `OrderServiceInterface`)
- Nombre del archivo: `{Entity}ServiceInterface.php` (ej: `UserServiceInterface.php`)
- Estructura: `app/Contracts/{Entity}/{Entity}ServiceInterface.php`
- Seguir convenciones de Laravel para Contracts

## Estructura de Directorios

```
app/Contracts/
├── User/
│   └── UserServiceInterface.php
├── Order/
│   └── OrderServiceInterface.php
```

## Estructura

```php
namespace App\Contracts\User;

use App\Data\User\UserStoreData;
use App\Data\User\UserUpdateData;
use App\Models\User;

interface UserServiceInterface {
    public function create(UserStoreData $data): User;
    public function findById(int $id): ?User;
    public function getAll(): \Illuminate\Database\Eloquent\Collection;
    public function update(int $id, UserUpdateData $data): ?User;
    public function delete(int $id): void;
}
```

## Uso

Los Contracts se inyectan en controladores y otros servicios:

```php
use App\Contracts\User\UserServiceInterface;

class UserController extends Controller {
    public function __construct(
        private UserServiceInterface $userService
    ) {}
}
```

## Registro en Service Provider

```php
$this->app->bind(
    \App\Contracts\User\UserServiceInterface::class,
    \App\Services\User\UserService::class
);
```

## Reglas

- Definir solo métodos públicos que serán implementados
- Usar Data (Spatie) para parámetros de entrada; retornar modelos Eloquent o colecciones
- NO incluir implementación, solo la firma de métodos
- Usar type hints estrictos
- Retornar modelos, colecciones o tipos primitivos
- Un Contract por servicio/entidad
- **El nombre del archivo debe terminar con `Interface.php`**
- **El nombre de la interfaz debe terminar con `Interface`**

## Relación con Services

- Los Contracts definen **qué** debe hacer el servicio
- Los Services (implementaciones) definen **cómo** se hace
- La implementación debe cumplir exactamente con el Contract
- El Service implementa el Contract con el mismo nombre base (sin Interface)
